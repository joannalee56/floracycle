{% extends 'base.html' %}

{% block title %}{{ classified.post_title }}{% endblock %}

{% block body %}
<fieldset class="classified-body">
  <div class="row">
    <div class="leftcolumn">
      <div class="card">
        <h2>{{ classified.post_title | capitalize }}</h2>
        <h5>Posted: {{ classified_gregorian_date }}</h5>
        <time datetime="{{ classified.post_time }}"></time>
        <img src="{{ classified.post_image }}" class="classified-img">
        <br>
        <p><strong>Description</strong></p>
        <p>{{ classified.description }}</p>
        <br>
        <p><strong>Price</strong>
          {% if classified.cost == "N/A" %}
            N/A
          {% else %}
            ${{classified.cost}}
          {% endif %}
        </p>
        <br>

        {% if classified.cost_type %}
          <p>For {{ classified.cost_type }}</p>
        {% endif %}
        <br>

        <p><strong>Tags</strong></p>
        <p>
        {% for tag in classified.tags %}
          {{ tag.tag_label|title }} &emsp;
        {% endfor %}
        </p>

        <br>
        <form action="/classified/{{classified.classified_id}}/message">
          <input type="submit" name="message" value="Contact Florist" class="btn btn-outline-success">
        </form>
      </div>
    </div>
    <div class="rightcolumn">
      <div class="card">
        <h3>Location</h3>
        <p>
          {% if classified.postal_code %}
            {{ classified.location }}
            <section class="map">
              <div id="map"></div>
            </section>
          {% elif classified.postal_code == 0 %}
            <div>Not available</div>
          {% endif %}
        </p>
        <p class='postal_code' hidden>{{ classified.postal_code }}</p>
      </div>

      <div class="card">
        <h2>About the florist</h2>
        <img src="{{ classified.user.image }}">
        <p>{{ classified.user.fname }} {{ classified.user.lname }}</p>
        <p>Joined in: {{ user_gregorian_date }}</p>

        {% if classified.user.about_me %}
          <p>{{ classified.user.about_me }}</p>
        {% endif %}
      
      
      </div>
      <div class="card">
        <h5>Other classifieds from {{ classified.user.fname }}</h5>

        {% for user_classified in classified.user.classifieds %}

          {% if user_classified.classified_id != classified.classified_id  %}
            <a href="/classified/{{ user_classified.classified_id }}">
              {{ user_classified.post_title | capitalize }}
            </a>
            <img src="{{ user_classified.post_image }}">
            <br><br>
          {% endif %}

        {% endfor %}
      </div>
    </div>
  </div>
</fieldset>

<script src="/static/js/classified_details.js"></script>
<script
  async
  src="https://maps.googleapis.com/maps/api/js?key={{MAPS_API_KEY}}&callback=initMap">
</script>

{% endblock %}